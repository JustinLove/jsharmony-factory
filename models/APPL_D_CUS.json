{
  "GPE_DL": {
    "inherits": "DL",
    "table":"jsharmony.v_dl",
    "title":"Documents - <#=bcrumbs.pe_lname#>, <#=bcrumbs.pe_fname#>",
    "roles": {"O_B":"B","O_X":"*"},
    "buttons":[{"link":"insert:GPE_D","bindings":{"d_scope_id":"d_scope_id","d_scope":"d_scope"}}],
    "breadcrumbs":{
      "sql": ["select pe_fname, pe_lname from jsharmony.pe where pe_id=@d_scope_id"],
      "sql_params": ["d_scope","d_scope_id"]
    },
    "fields":[
      {"name":"d_scope","foreignkey":1},
      {"name":"d_utstmp","link":"update:GPE_D"},
      {"name":"btndownload","value": "<a href='<%=jsh._BASEURL%>_dl/<%=xmodel.moduleNamespace%>GPE_D/<%=data['d_id']%>/d_file'>Download</a>"},
      {"name":"btndetails","link":"update:GPE_D"}
    ]   
  },
  "GPE_D": {
    "inherits": "D",
    "table":"jsharmony.d",
    "title":"Document - User: <#=bcrumbs.pe_lname#>, <#=bcrumbs.pe_fname#>",
    "breadcrumbs":{
      "sql": ["select pe_fname, pe_lname from jsharmony.pe ",
              " where pe_id=coalesce(@d_scope_id,(select d_scope_id from jsharmony.d where d_id = @d_id))"],
      "sql_params": ["d_scope_id","d_scope"]
    },
    "roles": {"O_B":"B","O_X":"*"}
  }
}