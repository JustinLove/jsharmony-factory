{
  "Base/Admin/SysUser": {
    "layout":"form", 
    "table":"{schema}.sys_user",
    "title":"System User",
    "caption": [ "", "User", "Users" ],
    "actions":"BIUD", 
    "menu":"Admin/SysUser_Listing",
    "popup":[850,650],
    "fields":[
      {"name":"sys_user_id","type":"bigint","key":1,"control":"hidden"},
      {"name":"sys_user_sts","type":"varchar","length":32,"actions":"BIU","validate": ["Required"],
       "control":"dropdown_S","lov": {"sql":"select code_val, code_txt from {schema}.code_ahc order by code_seq,code_txt"},
       "default": "ACTIVE",
       "caption":"Status","captionstyle":"width:120px;text-align:right;"},
      {"name":"sys_user_stsdt","type":"date","actions":"B", "control":"textbox_mmddyy",
       "caption":"DT","captionstyle":"width:14px;text-align:right;"},
      {"name":"sys_user_jobtitle","type":"varchar","length":35,"actions":"BIU",
       "control":"textbox_2","caption":"Title"},
      {"name":"sys_user_fname","type":"varchar","length":35,"actions":"BIU","nl":1,
       "control":"textbox_M","caption":"First Name"},
      {"name":"sys_user_mname","type":"varchar","length":35,"actions":"BIU",
       "control":"textbox_2","caption":"Middle Name"},
      {"name":"sys_user_lname","type":"varchar","length":35,"actions":"BIU","nl":1,
       "control":"textbox_VL", "validate":["Required"],
              "caption":"Last Name"},
      {"name":"sys_user_bphone","type":"varchar","length":30,"actions":"BIU","nl":1,
            "control":"textbox_phone","controlstyle":"width:144px;",
              "caption":"Phone"},
      {"name":"sys_user_cphone","type":"varchar","length":30,"actions":"BIU",
            "control":"textbox_phone",
              "caption":"Cell Phone","captionstyle":"width:210px;text-align:right;"},
      {"name":"sys_user_email","type":"varchar","length":255,"actions":"BIU","nl":1,
            "control":"textbox_email", "validate":["IsEmail","Required"],
              "caption":"E-Mail Address"},
      {"name": "sys_user_startdt","type": "date","actions": "BIU","nl": 1,"control": "date_mmddyy","controlstyle":"width:60px;",
       "validate": [ "Required" ],"default": "js:moment().format()","caption": "Started"},
      {"name": "sys_user_enddt","type": "date","actions": "BIU","control": "date_mmddyy","controlstyle":"width:60px;",
       "caption": "Term"},
      {"name": "sys_user_country","type": "varchar","length": 32,"actions": "BIU",
       "control": "dropdown","controlstyle": "width:86px;",
       "lov": {"sql":"select code_val, code_txt from {schema}.code_country order by code_seq,code_txt"},
       "validate": [ "Required" ],"default": "USA","caption": "Country","captionstyle":"width:180px;text-align:right;"},
      {"control":"html","value":"<br/><div style='display:inline-block;vertical-align:top;'>"},
      {"name":"sys_user_pw1","type":"varchar","length":255,"actions":"BIU","control":"password","caption":"New Password","captionstyle":"width:120px;text-align:right;"},
      {"name":"sys_user_pw2","type":"varchar","length":255,"actions":"BIU","nl":1,"control":"password","caption":"Repeat Password"},
      {"control":"html","value":"</div>"},
      {"control":"html","value":"<div style='display:inline-block;vertical-align:top;'>"},
      {"name": "sys_user_addr","type": "varchar","length": 200,"actions": "BIU","control": "textbox_M","validate": [ "MaxLength:50" ],"caption": "Address","captionstyle":"width:200px;text-align:right;"},
      {"name": "sys_user_city","type": "varchar","length": 50,"actions": "BIU","control": "textbox_M","validate": [ "MaxLength:50"],"caption": "City","captionstyle":"width:200px;text-align:right;","nl":1},
      {"name": "sys_user_state","type": "varchar","length": 32,"actions": "BIU","control": "dropdown_S","caption": "State","nl":1,"captionstyle":"width:200px;text-align:right;",
       "lov": {"sql2":"select code_val1 as %%%jsh.map.{{code_parent}}%%%, code_val2 as %%%jsh.map.{{code_val}}%%%, %%%jsh.map.{{code_txt}}%%% from {schema}.code2_country_state order by code_seq,code_txt", "blank": " ", "parent": "sys_user_country", "showcode":1 },
       },
      {"name": "sys_user_zip","type": "varchar","length": 50,"actions": "BIU","control": "textbox_S","controlstyle": "width:72px;","validate": [ "MaxLength:20" ],"caption": "Zip"},
      {"control":"html","value":"</div>"},
      {"name": "sys_user_photo","type": "file","actions": "","nl": 1,
       "control":"file_upload","caption":"Photo",
       "controlparams": { 
         "sqlparams": { },
         "data_folder": "sys_user",
         "download_button": "Download Image",
         "preview_button": "View Image",
         "upload_button": "Upload Image",
         "delete_button": "Delete",
         "image": {
           "crop": [500,500],
           "format":  "jpg"
         },
       "thumbnails": {
           "sys_user_photo_thumb": {
             "crop": [100,100],
             "format":  "jpg"
              } 
            }
       },
       "validate": ["Extension:jsh.Config.supported_images"]
      },
      {"name":"sys_user_unotes","type":"varchar","length":4096,"actions":"BIU","nl":1,
       "control":"textarea","controlstyle":"width:608px;height:45px;",
       "caption":"Notes","captionstyle":"width:120px;height:45px;vertical-align:top;padding-top:3px;text-align:right;"},
      {"control":"html","value":"<div class=\"clear\" style=\"padding-bottom:15px;\"></div>"},
      {"name":"sys_user_sys_user_role",
            "control":"subform","controlstyle":"width:345px;float:left;margin-right:15px;",
          "target":"Admin/SysUser_Role",
                  "bindings":{"sys_user_id":"sys_user_id"},
                  "caption":"User Roles",
          "actions": "BIUD"},
      {"name":"sys_user_sys_user_func",
            "control":"subform","controlstyle":"width:345px;float:left;",
          "target":"Admin/SysUser_Func",
                  "bindings":{"sys_user_id":"sys_user_id"},
                  "caption":"User Functions",
          "actions": "BIUD"},
      {"control":"html","value":"<div class=\"clear\"></div>"},
      {"name":"sys_user_etstmp","type":"datetime","length":7,"actions":"B","nl":1,
       "control":"textbox_tstmp", "caption":"Entered"},
      {"name":"sys_user_euser_fmt","type":"varchar","length":20,"actions":"B",
       "sqlselect":"({schema}.my_db_user_fmt(sys_user_euser))",
       "control":"textbox","controlstyle":"width:158px;","caption":""},
      {"name":"sys_user_mtstmp","type":"datetime","length":7,"actions":"B","nl":1,
            "control":"textbox_tstmp",
              "caption":"Last Updated"},
      {"name":"sys_user_muser_fmt","type":"varchar","length":20,"actions":"B",
       "sqlselect":"({schema}.my_db_user_fmt(sys_user_muser))",
       "control":"textbox","controlstyle":"width:158px;","caption":""},
      {"name":"sys_user_lastlogin_tstmp","type":"datetime","length":"7","actions":"B","nl":1,
            "control":"textbox_tstmp",
              "caption":"Last Login (UTC)"},
      {"name":"sys_user_lastlogin_ip","type":"varchar","length":255,"actions":"B",
            "control":"label_S",
              "caption":"Last Login IP",
              "eol":1}
    ],
    "dberrors":[
      ["fk_sys_user_role_sys_user","Cannot delete a user with selected role(s)."],
      ["fk_sys_user_role_sys_user","Cannot delete a user with selected role(s)."],
      ["fk_sys_user_func_sys_user","Cannot delete a user with selected function(s)."],
      ["fk_sys_user_func_sys_user","Cannot delete a user with selected function(s)."],
      ["unq_sys_user_sys_user_email","A user with the same Email address already exists."],
      ["sys_user_role_sys_user_id_fkey","Cannot delete a user with selected role(s)."],
      ["sys_user_func_sys_user_id_fkey","Cannot delete a user with selected function(s)."],
      ["sys_user_sys_user_email_unique","A user with the same Email address already exists."]
    ]
  },    
  "Admin/SysUser": {
    "inherits":"Base/Admin/SysUser",  
    "fields":[
      {"name":"sys_user_photo","actions":" "}
    ]
  }
}