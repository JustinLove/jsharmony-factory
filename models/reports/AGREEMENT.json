{
"comment":"AGREEMENT",
  "layout": "exec",
  "title": "Customer Agreement",
  "actions": "B",
  //"roles": { "client": {"CSYSADMIN":"*","CADMIN":"*"} },
  "menu":"reports",
  "description": "Generate Signed Customer Agreement",
  "template": "AGREEMENT.ejs",
  "inherits": "_report_TMPL_DEFAULT",
  "fields": [
    {"name":"C_ID","type":"bigint","datalock":{"C_ID":"C_C_ID"},"nl":1,
	      "control":"dropdown_L","actions": "B",
        "lov": { "sql": "agreement_COD_C_ID", "datalock":{"C_ID":"C_ID"}, "blank": 1 },
        "validate": [ "Required" ],
        "default": "js:XExt.UndefinedBlank(_GET['C_ID'])",
        "caption":"Company Name"},
    {"name": "A_Name","type": "varchar","length": 72,"nl": 1,
      "control": "textbox","actions": "B",
      "validate": [ "Required" ],
      "caption": "Signed By"
    },
    {"name":"A_DOB","type":"date","nl": 1,
	   "control":"date_mmddyy","actions":"B",
     "validate": [ "Required" ],
		 "caption":"Date of Birth","controlstyle":"width:80px;","captionstyle":"width:80px;"},
    {"nl": 1,"control":"button","value":"Run Report","controlstyle": "padding:3px 8px;",
      "onclick": "jsh.XRunReport();"},
    {"control":"button","value":"Test Job Queue","controlstyle": "padding:3px 8px;",
      "onclick": "jsh.XTestQueue();"},
    {"control":"button","value":"Email to Cust","controlstyle": "padding:3px 8px;",
      "onclick": "jsh.XRunQueue();"}
  ],
  "reportdata" : {
    "cms_agreement": { "sql": "select TXT_VAL \"TXT_VAL\" from jsharmony.TXT where TXT_PROCESS='CMS' and TXT_ATTRIB='AGREEMENT'", "nodatalock": ["C_ID"] },
    "C":{
      "sql":"select C_ID \"C_ID\" from C where C_ID=@C_ID %%%DATALOCKS%%%",
      "children":{
        "NTYPE":{
          "bindings":{"C_ID":"C_ID"},
          "sql":"select distinct N.C_ID \"C_ID\",N_TYPE \"N_TYPE\" from jsharmony.N inner join C on C.C_ID=N.C_ID where N.C_ID=@C_ID %%%DATALOCKS%%%",
          "children":{
            "N":{
             "bindings":{"C_ID":"C_ID","N_TYPE": "N_TYPE"},
             "sql":"agreement_report_N"
            }
          }
        }
      }
    }
  },
  "jobqueue": {
    "sql": "select 'CLIENT' as RQST_SOURCE,'C' as D_SCOPE,C_ID as D_SCOPE_ID,'AGREEMNT' as D_CTGR,'Cust Agreement' as D_Desc,C_ID from C where C_ID=@C_ID %%%DATALOCKS%%%"
      //'C' as N_SCOPE, C_ID as N_SCOPE_ID, 'S' as N_TYPE, 'Test Note' N_Note
      //'test@test.com' as EMAIL_TO,null as EMAIL_CC,null as EMAIL_BCC,'RCVD' as EMAIL_TXT_ATTRIB,1 as EMAIL_ATTACH
      //'+12223334444' as SMS_TO, 'WELCOME' as SMS_TXT_ATTRIB
  }
}