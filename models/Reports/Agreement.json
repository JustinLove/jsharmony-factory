{
  "Agreement": {
    "comment":"Agreement",
    "source_files_prefix":"Agreement",
    "layout": "report",
    "title": "Customer Agreement",
    "actions": "B",
    //"roles": { "client": {"CSYSADMIN":"*","CADMIN":"*"} },
    "menu":"reports",
    "description": "Generate Signed Customer Agreement",
    "template": "Agreement.ejs",
    "inherits": "TMPL_DEFAULT",
    "fields": [
      {"name":"c_id","type":"bigint","datalock":{"c_id":"c_c_id"},"nl":1,
          "control":"dropdown_L","actions": "B",
          "lov": { "sql": "agreement_COD_C_ID", "datalock":{"c_id":"c_id"}, "blank": 1 },
          "validate": [ "Required" ],
          "default": "js:XExt.UndefinedBlank(_GET['c_id'])",
          "caption":"Company Name"},
      {"name": "a_name","type": "varchar","length": 72,"nl": 1,
        "control": "textbox","actions": "B",
        "validate": [ "Required" ],
        "caption": "Signed By"
      },
      {"name":"a_dob","type":"date","nl": 1,
      "control":"date_mmddyy","actions":"B",
      "validate": [ "Required" ],
      "caption":"Date of Birth","controlstyle":"width:80px;","captionstyle":"width:80px;"},
      {"nl": 1,"control":"button","value":"Run Report","controlstyle": "padding:3px 8px;",
        "onclick": "jsh.XPage.RunReport();"},
      {"control":"button","value":"Test Job Queue","controlstyle": "padding:3px 8px;",
        "onclick": "jsh.XPage.TestQueue();"},
      {"control":"button","value":"Email to Cust","controlstyle": "padding:3px 8px;",
        "onclick": "jsh.XPage.RunQueue();"}
    ],
    "reportdata" : {
      "cms_agreement": { "sql": "select txt_val \"txt_val\" from jsharmony.txt where txt_process='CMS' and txt_attrib='Client/Agreement'", "nodatalock": ["c_id"] },
      "C":{
        "sql":"select c_id \"c_id\" from c where c_id=@c_id %%%DATALOCKS%%%",
        "children":{
          "NTYPE":{
            "bindings":{"c_id":"c_id"},
            "sql":"select distinct n.c_id \"c_id\",n_type \"n_type\" from jsharmony.n inner join c on c.c_id=n.c_id where n.c_id=@c_id %%%DATALOCKS%%%",
            "children":{
              "N":{
              "bindings":{"c_id":"c_id","n_type": "n_type"},
              "sql":"agreement_report_N"
              }
            }
          }
        }
      }
    },
    "jobqueue": {
      "sql": "select 'CLIENT' as rqst_source,'C' as d_scope,c_id as d_scope_id,'agreement_doc_scope' as d_ctgr,'Cust Agreement' as d_desc,c_id from c where c_id=@c_id %%%DATALOCKS%%%"
        //'C' as n_scope, c_id as n_scope_id, 'S' as n_type, 'Test Note' n_note
        //'test@test.com' as email_to,null as email_cc,null as email_bcc,'RCVD' as email_txt_attrib,1 as email_attach
        //'+12223334444' as sms_to, 'Client/Welcome' as sms_txt_attrib
    }
  }
}