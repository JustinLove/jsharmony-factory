{
  "PE_BASE": {
    "layout":"form", 
    "table":"jsharmony.pe",
    "title":"System User",
    "caption": [ "", "User", "Users" ],
    "actions":"BIUD", 
    "menu":"ADMINISTRATION_USERS",
    "popup":[850,650],
    "fields":[
      {"name":"pe_id","type":"bigint","key":1,"control":"hidden"},
      {"name":"pe_sts","type":"varchar","length":8,"actions":"BIU","validate": ["Required"],
       "control":"dropdown_S","lov": {"sql":"select CODEVal, CODETxt from jsharmony.ucod_ahc order by codseq,codetxt"},
       "default": "ACTIVE",
       "caption":"Status","captionstyle":"width:120px;text-align:right;"},
      {"name":"pe_stsdt","type":"date","actions":"B", "control":"textbox_mmddyy",
       "caption":"DT","captionstyle":"width:14px;text-align:right;"},
      {"name":"pe_jtitle","type":"varchar","length":35,"actions":"BIU",
       "control":"textbox_2","caption":"Title"},
      {"name":"pe_fname","type":"varchar","length":35,"actions":"BIU","nl":1,
       "control":"textbox_M","caption":"First Name"},
      {"name":"pe_mname","type":"varchar","length":35,"actions":"BIU",
       "control":"textbox_2","caption":"Middle Name"},
      {"name":"pe_lname","type":"varchar","length":35,"actions":"BIU","nl":1,
       "control":"textbox_VL", "validate":["Required"],
              "caption":"Last Name"},
      {"name":"pe_bphone","type":"varchar","length":30,"actions":"BIU","nl":1,
            "control":"textbox_phone","controlstyle":"width:144px;",
              "caption":"Phone"},
      {"name":"pe_cphone","type":"varchar","length":30,"actions":"BIU",
            "control":"textbox_phone",
              "caption":"Cell Phone","captionstyle":"width:210px;text-align:right;"},
      {"name":"pe_email","type":"varchar","length":255,"actions":"BIU","nl":1,
            "control":"textbox_email", "validate":["IsEmail","Required"],
              "caption":"E-Mail Address"},
      {"name": "pe_startdt","type": "date","actions": "BIU","nl": 1,"control": "date_mmddyy","controlstyle":"width:60px;",
       "validate": [ "Required" ],"default": "js:moment().format()","caption": "Started"},
      {"name": "pe_enddt","type": "date","actions": "BIU","control": "date_mmddyy","controlstyle":"width:60px;",
       "caption": "Term"},
      {"name": "pe_country","type": "varchar","length": 8,"actions": "BIU",
       "control": "dropdown","controlstyle": "width:86px;",
       "lov": {"sql":"select CODEVal, CODETxt from jsharmony.ucod_country order by codseq,codetxt"},
       "validate": [ "Required" ],"default": "USA","caption": "Country","captionstyle":"width:180px;text-align:right;"},
      {"name":"pe_pw1","type":"varchar","length":255,"actions":"BIU","nl":1,
            "control":"password", 
              "caption":"New Password"},
      {"name": "pe_addr","type": "varchar","length": 200,"actions": "BIU","control": "textbox_M",
       "validate": [ "MaxLength:50" ],"caption": "Address","captionstyle":"width:200px;text-align:right;"},
      {"name":"pe_pw2","type":"varchar","length":255,"actions":"BIU","nl":1,"control":"password",
       "caption":"Repeat Password"},
      {"name": "pe_city","type": "varchar","length": 50,"actions": "BIU","control": "textbox_M",
       "validate": [ "MaxLength:50"],"caption": "City","captionstyle":"width:200px;text-align:right;"},
      {"name": "pe_state","type": "varchar","length": 8,"actions": "BIU","control": "dropdown_S",
       "lov": {"sql2":"select CODEVal1 as %%%jsh.map.codeparent%%%, CODEVal2 as %%%jsh.map.codeval%%%, %%%jsh.map.codetxt%%% from jsharmony.ucod2_country_state order by codseq,codetxt", 
       "blank": " ", "parent": "pe_country", "showcode":1 },
       "caption": "State","captionstyle":"width:496px;text-align:right;","nl":1},
      {"name": "pe_zip","type": "varchar","length": 50,"actions": "BIU","control": "textbox_S","controlstyle": "width:72px;",
       "validate": [ "MaxLength:20" ],"caption": "Zip"},
      {"name": "pe_photo","type": "file","actions": "","nl": 1,
       "control":"file_upload","caption":"Photo",
       "controlparams": { 
         "sqlparams": { },
         "data_folder": "PE",
         "download_button": "Download Image",
         "preview_button": "View Image",
         "upload_button": "Upload Image",
         "delete_button": "Delete",
         "image": {
           "crop": [500,500],
           "format":  "jpg"
         },
       "thumbnails": {
           "PE_PHOTO_thumb": {
             "crop": [100,100],
             "format":  "jpg"
              } 
            }
       },
       "validate": ["Extension:jsh.Config.supported_images"]
      },
      {"name":"pe_unotes","type":"varchar","length":4096,"actions":"BIU","nl":1,
       "control":"textarea","controlstyle":"width:608px;height:45px;",
       "caption":"Notes","captionstyle":"width:120px;height:45px;vertical-align:top;padding-top:3px;text-align:right;"},
      {"control":"html","value":"<div class=\"clear\" style=\"padding-bottom:15px;\"></div>"},
      {"name":"pe_sper",
            "control":"subform","controlstyle":"width:345px;float:left;",
          "target":"PE_SPER",
                  "bindings":{"pe_id":"pe_id"},
                  "caption":"User Roles",
          "actions": "BIUD"},
      {"name":"pe_spef",
            "control":"subform","controlstyle":"width:345px;float:left;",
          "target":"PE_SPEF",
                  "bindings":{"pe_id":"pe_id"},
                  "caption":"User Functions",
          "actions": "BIUD"},
      {"control":"html","value":"<div class=\"clear\"></div>"},
      {"name":"pe_etstmp","type":"datetime","length":7,"actions":"B","nl":1,
       "control":"textbox_tstmp", "caption":"Entered"},
      {"name":"pe_eu_fmt","type":"varchar","length":20,"actions":"B",
       "sqlselect":"(jsharmony.mycuser_fmt(pe_eu))",
       "control":"textbox","controlstyle":"width:158px;","caption":""},
      {"name":"pe_mtstmp","type":"datetime","length":7,"actions":"B","nl":1,
            "control":"textbox_tstmp",
              "caption":"Last Updated"},
      {"name":"pe_mu_fmt","type":"varchar","length":20,"actions":"B",
       "sqlselect":"(jsharmony.mycuser_fmt(pe_mu))",
       "control":"textbox","controlstyle":"width:158px;","caption":""},
      {"name":"pe_ll_tstmp","type":"datetime","length":"7","actions":"B","nl":1,
            "control":"textbox_tstmp",
              "caption":"Last Login (UTC)"},
      {"name":"pe_ll_ip","type":"varchar","length":255,"actions":"B",
            "control":"label_S",
              "caption":"Last Login IP",
              "eol":1}
    ],
    "dberrors":[
      ["fk_sper_pe","Cannot delete a user with selected role(s)."],
      ["FK_SPER_PE","Cannot delete a user with selected role(s)."],
      ["fk_spef_pe","Cannot delete a user with selected function(s)."],
      ["FK_SPEF_PE","Cannot delete a user with selected function(s)."],
      ["UNQ_PE_PE_Email","A user with the same Email address already exists."],
      ["sper_pe_id_fkey","Cannot delete a user with selected role(s)."],
      ["spef_pe_id_fkey","Cannot delete a user with selected function(s)."],
      ["pe_pe_email_unique","A user with the same Email address already exists."]
    ]
  },    
  "PE": {
    "inherits":"PE_BASE",  
    "fields":[
      {"name":"pe_photo","actions":" "}
    ]
  }
}